{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\USER\\\\Documents\\\\PROYECTO-INTEGRADOR\\\\frontend\\\\src\\\\Login.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { IonPage, IonContent, IonItem, IonInput, IonButton, IonLabel, IonHeader, IonToolbar, IonTitle, IonToast, IonIcon, IonImg } from '@ionic/react';\nimport { useHistory } from 'react-router-dom';\nimport axios from 'axios';\nimport { mailOutline, lockClosedOutline } from 'ionicons/icons';\nimport './LoginPage.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst LoginPage = () => {\n  _s();\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [toastMessage, setToastMessage] = useState('');\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const history = useHistory();\n  const handleLogin = async event => {\n    event.preventDefault();\n    if (!email.trim() || !password.trim()) {\n      setToastMessage('Por favor, introduce tu correo electrónico y contraseña');\n      return;\n    }\n    setIsSubmitting(true); // Indicador de carga mientras se procesa el formulario\n\n    try {\n      const response = await axios.post('http://localhost:3000/users/login', {\n        email,\n        password\n      });\n      if (response.data.token) {\n        localStorage.setItem('token', response.data.token);\n        localStorage.setItem('userId', response.data.userId);\n        history.push('/photo-feed'); // Navegar a la página principal después del login exitoso\n      } else {\n        setToastMessage('Credenciales incorrectas, intenta nuevamente');\n      }\n    } catch (error) {\n      if (axios.isAxiosError(error) && error.response) {\n        setToastMessage(error.response.data.message || 'Error al iniciar sesión');\n      } else {\n        setToastMessage('Error de red al conectar al servidor');\n      }\n      console.error('Error de login:', error);\n    } finally {\n      setIsSubmitting(false); // Restablecer el estado de carga\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(IonPage, {\n    children: [/*#__PURE__*/_jsxDEV(IonHeader, {\n      children: /*#__PURE__*/_jsxDEV(IonToolbar, {\n        children: /*#__PURE__*/_jsxDEV(IonTitle, {\n          children: \"Iniciar Sesi\\xF3n\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(IonContent, {\n      className: \"ion-padding\",\n      children: [/*#__PURE__*/_jsxDEV(IonImg, {\n        className: \"login-logo\",\n        src: \"/assets/logo.png\",\n        alt: \"Logo\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleLogin,\n        children: [/*#__PURE__*/_jsxDEV(IonItem, {\n          children: [/*#__PURE__*/_jsxDEV(IonIcon, {\n            icon: mailOutline,\n            slot: \"start\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(IonLabel, {\n            position: \"stacked\",\n            children: \"Correo Electr\\xF3nico\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(IonInput, {\n            type: \"email\",\n            value: email,\n            onIonChange: e => setEmail(e.detail.value),\n            clearInput: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(IonItem, {\n          children: [/*#__PURE__*/_jsxDEV(IonIcon, {\n            icon: lockClosedOutline,\n            slot: \"start\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(IonLabel, {\n            position: \"stacked\",\n            children: \"Contrase\\xF1a\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(IonInput, {\n            type: \"password\",\n            value: password,\n            onIonChange: e => setPassword(e.detail.value),\n            clearInput: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(IonButton, {\n          type: \"submit\",\n          expand: \"block\",\n          disabled: isSubmitting,\n          children: isSubmitting ? 'Cargando...' : 'Iniciar Sesión'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(IonButton, {\n          routerLink: \"/register\",\n          expand: \"block\",\n          fill: \"clear\",\n          children: \"\\xBFNo tienes cuenta? Reg\\xEDstrate\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(IonToast, {\n        isOpen: !!toastMessage,\n        onDidDismiss: () => setToastMessage(''),\n        message: toastMessage,\n        duration: 3000\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 5\n  }, this);\n};\n_s(LoginPage, \"qh0KUPwU1iDD2EoS4aq6aLssgEE=\", false, function () {\n  return [useHistory];\n});\n_c = LoginPage;\nexport default LoginPage;\nvar _c;\n$RefreshReg$(_c, \"LoginPage\");","map":{"version":3,"names":["React","useState","IonPage","IonContent","IonItem","IonInput","IonButton","IonLabel","IonHeader","IonToolbar","IonTitle","IonToast","IonIcon","IonImg","useHistory","axios","mailOutline","lockClosedOutline","jsxDEV","_jsxDEV","LoginPage","_s","email","setEmail","password","setPassword","toastMessage","setToastMessage","isSubmitting","setIsSubmitting","history","handleLogin","event","preventDefault","trim","response","post","data","token","localStorage","setItem","userId","push","error","isAxiosError","message","console","children","fileName","_jsxFileName","lineNumber","columnNumber","className","src","alt","onSubmit","icon","slot","position","type","value","onIonChange","e","detail","clearInput","expand","disabled","routerLink","fill","isOpen","onDidDismiss","duration","_c","$RefreshReg$"],"sources":["C:/Users/USER/Documents/PROYECTO-INTEGRADOR/frontend/src/Login.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport {\r\n  IonPage, IonContent, IonItem, IonInput, IonButton, IonLabel,\r\n  IonHeader, IonToolbar, IonTitle, IonToast, IonIcon, IonImg\r\n} from '@ionic/react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport { mailOutline, lockClosedOutline } from 'ionicons/icons';\r\nimport './LoginPage.css';\r\n\r\nconst LoginPage = () => {\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [toastMessage, setToastMessage] = useState('');\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const history = useHistory();\r\n\r\n  const handleLogin = async (event) => {\r\n    event.preventDefault();\r\n\r\n    if (!email.trim() || !password.trim()) {\r\n      setToastMessage('Por favor, introduce tu correo electrónico y contraseña');\r\n      return;\r\n    }\r\n\r\n    setIsSubmitting(true); // Indicador de carga mientras se procesa el formulario\r\n\r\n    try {\r\n      const response = await axios.post('http://localhost:3000/users/login', { email, password });\r\n      if (response.data.token) {\r\n        localStorage.setItem('token', response.data.token);\r\n        localStorage.setItem('userId', response.data.userId);\r\n        history.push('/photo-feed'); // Navegar a la página principal después del login exitoso\r\n      } else {\r\n        setToastMessage('Credenciales incorrectas, intenta nuevamente');\r\n      }\r\n    } catch (error) {\r\n      if (axios.isAxiosError(error) && error.response) {\r\n        setToastMessage(error.response.data.message || 'Error al iniciar sesión');\r\n      } else {\r\n        setToastMessage('Error de red al conectar al servidor');\r\n      }\r\n      console.error('Error de login:', error);\r\n    } finally {\r\n      setIsSubmitting(false); // Restablecer el estado de carga\r\n    }\r\n  };\r\n\r\n  return (\r\n    <IonPage>\r\n      <IonHeader>\r\n        <IonToolbar>\r\n          <IonTitle>Iniciar Sesión</IonTitle>\r\n        </IonToolbar>\r\n      </IonHeader>\r\n      <IonContent className=\"ion-padding\">\r\n        <IonImg className=\"login-logo\" src=\"/assets/logo.png\" alt=\"Logo\" />\r\n        <form onSubmit={handleLogin}>\r\n          <IonItem>\r\n            <IonIcon icon={mailOutline} slot=\"start\" />\r\n            <IonLabel position=\"stacked\">Correo Electrónico</IonLabel>\r\n            <IonInput type=\"email\" value={email} onIonChange={e => setEmail(e.detail.value)} clearInput />\r\n          </IonItem>\r\n          <IonItem>\r\n            <IonIcon icon={lockClosedOutline} slot=\"start\" />\r\n            <IonLabel position=\"stacked\">Contraseña</IonLabel>\r\n            <IonInput type=\"password\" value={password} onIonChange={e => setPassword(e.detail.value)} clearInput />\r\n          </IonItem>\r\n          <IonButton type=\"submit\" expand=\"block\" disabled={isSubmitting}>\r\n            {isSubmitting ? 'Cargando...' : 'Iniciar Sesión'}\r\n          </IonButton>\r\n          <IonButton routerLink=\"/register\" expand=\"block\" fill=\"clear\">\r\n            ¿No tienes cuenta? Regístrate\r\n          </IonButton>\r\n        </form>\r\n        <IonToast\r\n          isOpen={!!toastMessage}\r\n          onDidDismiss={() => setToastMessage('')}\r\n          message={toastMessage}\r\n          duration={3000}\r\n        />\r\n      </IonContent>\r\n    </IonPage>\r\n  );\r\n};\r\n\r\nexport default LoginPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}